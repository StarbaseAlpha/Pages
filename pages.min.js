"use strict";function Pages(db,parentPath="homepage",container=null,callback){const component=document.createElement("div");component.classList.add("component"),component.classList.add("editor"),component.innerHTML='\n<form method="POST">\n<div>\n<select name="list" placeholder="Documents:" aria-label="Documents"><option value="">Documents:</option></select>\n<input name="path" value="" placeholder="Path:" aria-label="Path" />\n<input name="title" value="" placeholder="Title:" aria-label="Title" />\n<input name="description" value="" placeholder="Description:" aria-label="Description" />\n<input name="pubdate" value="" placeholder="Publish Date:" aria-label="Publish Date" />\n<input name="photo" value="" placeholder="Featured Photo:" aria-label="Featured Photo" />\n<input name="redirect" value="" placeholder="Redirect:" aria-label="Redirect" />\n<input name="template" value="" placeholder="Template:" aria-label="Template" />\n</div>\n<div>\n<button name="loadButton">ðŸ“‚ Load</button>\n<button name="deleteButton">ðŸš« Delete</button>\n<button name="saveButton">ðŸ’¾ Save</button>\n</div>\n<p name="info" aria-label="Information"></p>\n<textarea name="content" value="" placeholder="Content:" aria-label="Content" /></textarea>\n<textarea name="above" value="" placeholder="Above Content:" aria-label="Above Content" /></textarea>\n<textarea name="below" value="" placeholder="Below Content:" aria-label="Below Content" /></textarea>\n</form>\n';const{list:list,path:path,title:title,description:description,pubdate:pubdate,photo:photo,content:content,redirect:redirect,template:template,above:above,below:below,loadButton:loadButton,deleteButton:deleteButton,saveButton:saveButton}=component.getElementsByTagName("form")[0].elements,{info:info}=component.getElementsByTagName("form")[0].getElementsByTagName("p");let unsaved=!1;above.onchange=above.onpaste=above.onkeyup=below.onchange=below.onpaste=below.onkeyup=content.onpaste=content.onchange=content.onkeyup=title.onpaste=title.onchange=title.onkeyup=description.onpaste=description.onchange=description.onkeyup=pubdate.onkeyup=pubdate.onchange=pubdate.onpaste=photo.onchange=photo.onpaste=photo.onkeyup=redirect.onchange=redirect.onkeyup=redirect.onpaste=template.onchange=template.onkeyup=template.onpaste=path.onchange=path.onkeyup=path.onpaste=(e=>{unsaved=!0});const refreshList=async()=>{list.innerHTML="";let firstOption=document.createElement("option");firstOption.innerText="Documents:",firstOption.value="",list.appendChild(firstOption),(await db.path(parentPath).list({deep:!0})).data.forEach(doc=>{let option=document.createElement("option");option.value=db.parse(doc.path.replace(parentPath,"")).path,option.innerText=db.parse(doc.path.replace(parentPath,"")).path,list.appendChild(option)}),list.onchange=(async e=>{let last=path.value.toString();path.value=list.value,await Load(e)||(path.value=last)})},handler=e=>{callback&&"function"==typeof callback&&callback(e)},Load=async e=>(e.preventDefault(),unsaved&&!confirm("Unsaved changes. Are you sure you want to continue?")?(list.value="",null):(unsaved=!1,["/","/pages","/templates"].includes(db.path(path.value).parse().path)?(info.innerText="This resource cannot be loaded in the editor.",null):(content.value="",above.value="",below.value="",title.value="",redirect.value="",template.value="",description.value="",pubdate.value="",photo.value="",db.path(parentPath).path(path.value).get().then(async result=>(info.innerText="Loaded",result.data.content&&(content.value=result.data.content),title.value=result.data.title||"",description.value=result.data.description||"",pubdate.value=result.data.pubdate||"",photo.value=result.data.photo||"",redirect.value=result.data.redirect||"",template.value=result.data.template||"",above.value=result.data.above||"",below.value=result.data.below||"",list.value="",!0)).catch(err=>{info.innerText=err.message||"Error",description.value="",pubdate.value="",photo.value="",title.value="",content.value=""}))));loadButton.onclick=Load,saveButton.onclick=(async e=>{if(e.preventDefault(),["/","pages","/templates"].includes(db.path(path.value).parse().path))return info.innerText="This resource cannot be changed in the editor.",null;let data={};data.title=title.value||"",data.description=description.value||"",data.pubdate=pubdate.value||"",data.photo=photo.value||"",data.content=content.value||"",data.redirect=redirect.value||"",data.template=template.value||"",data.above=above.value||"",data.below=below.value||"",await db.path(parentPath).path(path.value).put(data).then(result=>{info.innerText="Saved",handler({type:"save",path:path.value}),unsaved=!1,refreshList()}).catch(err=>{info.innerText=err.message||"Error"})}),deleteButton.onclick=(async e=>(e.preventDefault(),["/","/pages","/menu","/templates"].includes(db.path(path.value).parse().path)?(info.innerText="This resource cannot be changed in the editor.",null):confirm("Do you really want to delete this?")?void db.path(parentPath).path(path.value).del().then(result=>{title.value="",description.value="",pubdate.value="",photo.value="",content.value="",above.value="",below.value="",redirect.value="",template.value="",info.innerText="Deleted",path.value="",handler({type:"delete",path:path.value}),unsaved=!1,refreshList()}).catch(err=>{info.innerText=err.message||"Error"}):null));const hide=()=>{component.classList.add("hidden")};return hide(),container&&container.appendChild(component),{component:component,hide:hide,show:async()=>{component.classList.remove("hidden"),await refreshList()}}}